<% if session[:id] %>
  <div id='gravatar'>
    <%= image_tag User.first.gravatar_url %>
  </div>
  <div id="dropdown" class="hide">
    <ul>
      <li><%= link_to 'New Snipit', new_snip_path %></li>
      <li><%= link_to 'My Snipits', snips_path %></li>
      <li><a href="/boards">My Boards</a></li>
      <li><%= link_to 'Logout', '/logout' %></li>
    </ul>
  </div>
<% else %>
  <div id='session'>
    <a href="/sessions/new">Login </a>|
    <a href="/users/new"> Signup</a>
  </div>
<% end %>
<div id='logo'>&#60;SnipIt&#62;</div>
<div id='search'>
  <div id='search_bar'>
    <%= form_tag "/search" do %>
      <%= text_field_tag "search", nil, :placeholder => 'e.g. Javascript Modal' %>
    <% end %>
  </div>
  <div id='language_box'>
    <% @languages.each do |language| %>
      <%= link_to "/languages/#{language.code}/snips" do %>
        <div class='language'>
          <div class='language_img'>
            <%= image_tag(language.code+".png", class: "image_icon") %>
          </div>
        </div>
      <% end %>
    <% end %>
  </div>
</div>

<script type="text/javascript">
  $('#gravatar').click(function(){
    $('#dropdown').fadeIn();
  });
  $(document).mouseup(function (e){
    var container = $("#dropdown");
    if (!container.is(e.target) // if the target of the click isn't the container...
      && container.has(e.target).length === 0) // ... nor a descendant of the container
    {
      container.fadeOut();
    }
  });
</script>
